<div class="game-container">
  <div class="puzzle-info" *ngIf="currentPuzzle && !loading">
    <h2>{{ currentPuzzle.title }}</h2>
    <p class="puzzle-description">{{ currentPuzzle.description }}</p>
    <div class="puzzle-navigation">
      <button (click)="loadPuzzle(1, true)" [class.active]="currentPuzzle.id === 1">Puzzle 1</button>
      <button (click)="loadPuzzle(2, true)" [class.active]="currentPuzzle.id === 2">Puzzle 2</button>
      <button (click)="loadPuzzle(3, true)" [class.active]="currentPuzzle.id === 3">Puzzle 3</button>
    </div>
  </div>

  <div class="loading" *ngIf="loading">
    <p>Loading puzzle...</p>
  </div>

  <div class="error" *ngIf="error">
    <p>{{ error }}</p>
  </div>

  <div class="game-content" *ngIf="!loading && !error">
    <!-- Show game interface for puzzle 1 -->
    <div *ngIf="currentPuzzle && currentPuzzle.id === 1">
      <div class="game-board">
        <!-- Grid cells -->
        <div class="grid-cell" 
             *ngFor="let tile of gridTiles; let i = index"
             [class.occupied]="gridTiles[i] !== null && !isSpotDisabled(i)"
             [class.disabled]="isSpotDisabled(i)"
             [class.completed]="isCellCompleted(i)"
             cdkDropList
             [id]="'grid-cell-' + i"
             (cdkDropListDropped)="dropOnCell($event, i)"
             [cdkDropListData]="[tile]"
             [cdkDropListConnectedTo]="getConnectedDropLists()">
          <app-game-tile 
            *ngIf="gridTiles[i] && !isSpotDisabled(i)" 
            [word]="gridTiles[i]!.word"
            [isDraggable]="!isCellCompleted(i)"
            cdkDrag>
          </app-game-tile>
          
          <!-- Center indicator for completed lines -->
          <div *ngIf="isSpotDisabled(i) && isCenterIndicatorActive(i)" class="center-indicator">
            <div class="arrow">{{ getCenterIndicatorArrow(i) }}</div>
            <div class="category-label">{{ getCenterIndicatorCategory(i) }}</div>
          </div>
          
          <!-- Default disabled spot -->
          <div *ngIf="isSpotDisabled(i) && !isCenterIndicatorActive(i)" class="disabled-spot"></div>
        </div>
      </div>

      <div class="tile-bank">
        <h3>Available Tiles</h3>
        <div class="bank-container" 
             cdkDropList
             id="bank-list"
             (cdkDropListDropped)="dropToBank($event)"
             [cdkDropListData]="availableTiles"
             [cdkDropListConnectedTo]="getConnectedDropLists()">
          <app-game-tile 
            *ngFor="let tile of availableTiles" 
            [word]="tile.word"
            [isDraggable]="true"
            cdkDrag>
          </app-game-tile>
        </div>
      </div>

      <div class="how-to-play">
        <h3>How to Play</h3>
        <p>
          Drag words to form complete lines of 4! If all 4 words in a row or column belong to the same category, 
          they will turn green and lock in place. Otherwise, they return to the tile bank. Any edge can be any category!
        </p>
      </div>
    </div>

    <!-- Show coming soon for puzzles 2 and 3 -->
    <div class="coming-soon" *ngIf="currentPuzzle && (currentPuzzle.id === 2 || currentPuzzle.id === 3)">
      <h2>Coming Soon!</h2>
      <p>This puzzle is still being crafted. Check back later for more challenging word puzzles!</p>
    </div>
  </div>
</div>
